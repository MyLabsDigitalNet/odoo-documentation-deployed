
<!DOCTYPE html>

<html lang="ES">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Reportes personalizados &#8212; documentación de Odoo - 16.0</title>
    
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/style.css" />
    
    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/js/utils.js"></script>
    <script src="../../../../_static/js/layout.js"></script>
    <script src="../../../../_static/js/menu.js"></script>
    <script src="../../../../_static/js/page_toc.js"></script>
    <script src="../../../../_static/js/switchers.js"></script>
    <script src="../../../../_static/translations.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
        crossorigin="anonymous"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
        <link rel="alternate" hreflang="x-default" href="https://ekodo.es/doc/applications/finance/accounting/reporting/customize.html" />
    <link rel="canonical" href="https://ekodo.es/doc/applications/finance/accounting/reporting/customize.html" />
    
    <link rel="index" title="Índice" href="../../../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../../../search.html" /> 
  </head><body>
    <noscript>
        <nav class="o_side_nav border-end">


<ul>
<li class="toctree-l1 o_menu_applications"><a class="reference internal" href="../../../../applications.html">Documentos para el usuario</a><ul>
<li class="toctree-l2 o_menu_applications_essentials"><a class="reference internal" href="#">Fundamentos de Odoo</a><ul>
<li class="toctree-l3 o_menu_applications_essentials_activities"><a class="reference internal" href="../../../essentials/activities.html">Actividades</a></li>
<li class="toctree-l3 o_menu_applications_essentials_reporting"><a class="reference internal" href="../../../essentials/reporting.html">Reportes</a></li>
<li class="toctree-l3 o_menu_applications_essentials_search"><a class="reference internal" href="../../../essentials/search.html">Buscar y filtrar registros</a></li>
<li class="toctree-l3 o_menu_applications_essentials_contacts"><a class="reference internal" href="../../../essentials/contacts.html">Contacts</a></li>
<li class="toctree-l3 o_menu_applications_essentials_export_import_data"><a class="reference internal" href="../../../essentials/export_import_data.html">Exportar e importar datos</a></li>
<li class="toctree-l3 o_menu_applications_essentials_in_app_purchase"><a class="reference internal" href="../../../essentials/in_app_purchase.html">Compras dentro de la aplicación (IAP)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </nav>
    </noscript>
    
    <nav id="o_menu" class="o_side_nav">
        <div class="o_mobile-overlay" data-bs-toggle="collapse" data-bs-target="#o_menu"></div>
        <div class="o_side_nav-inner border-end">
                
                <aside id="o_page_toc_in_nav" class="o_page_toc o_in_nav_toc border-bottom pt-3 pb-3" hidden><div class="o_page_toc_nav mt-1">
    <h5>En esta página</h5>
    <ul>
<li><a class="reference internal" href="#">Reportes personalizados</a><ul>
<li><a class="reference internal" href="#root-reports">Reporte raíz</a></li>
<li><a class="reference internal" href="#variants">Variantes</a></li>
<li><a class="reference internal" href="#lines">Líneas</a></li>
<li><a class="reference internal" href="#expressions">Expresiones</a><ul>
<li><a class="reference internal" href="#odoo-domain-engine">Motor del dominio de Odoo</a></li>
<li><a class="reference internal" href="#tax-tags-engine">Etiquetas de impuestos</a></li>
<li><a class="reference internal" href="#aggregate-other-formulas-engine">Agregar otras fórmulas</a></li>
<li><a class="reference internal" href="#prefix-of-account-codes-engine">Prefijo de los códigos de cuenta</a></li>
<li><a class="reference internal" href="#external-value-engine">Valor externo</a></li>
<li><a class="reference internal" href="#custom-python-function-engine">Función python personalizada</a></li>
</ul>
</li>
<li><a class="reference internal" href="#columns">Columnas</a></li>
</ul>
</li>
</ul>
 
</div>
                </aside>
            <div id="o_main_toctree" class="o_main_toc mt-3" hidden>


<ul>
<li class="toctree-l1 o_menu_applications"><a class="reference internal" href="../../../../applications.html">Documentos para el usuario</a><ul>
<li class="toctree-l2 o_menu_applications_essentials"><a class="reference internal" href="#">Fundamentos de Odoo</a><ul>
<li class="toctree-l3 o_menu_applications_essentials_activities"><a class="reference internal" href="../../../essentials/activities.html">Actividades</a></li>
<li class="toctree-l3 o_menu_applications_essentials_reporting"><a class="reference internal" href="../../../essentials/reporting.html">Reportes</a></li>
<li class="toctree-l3 o_menu_applications_essentials_search"><a class="reference internal" href="../../../essentials/search.html">Buscar y filtrar registros</a></li>
<li class="toctree-l3 o_menu_applications_essentials_contacts"><a class="reference internal" href="../../../essentials/contacts.html">Contacts</a></li>
<li class="toctree-l3 o_menu_applications_essentials_export_import_data"><a class="reference internal" href="../../../essentials/export_import_data.html">Exportar e importar datos</a></li>
<li class="toctree-l3 o_menu_applications_essentials_in_app_purchase"><a class="reference internal" href="../../../essentials/in_app_purchase.html">Compras dentro de la aplicación (IAP)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
        </div>
    </nav>
    <header class="o_headers"><div class="o_main_header border-bottom d-flex align-items-center">
    <div class="o_logo_wrapper">
      <a href="../../../../index.html" class="o_logo">
          <img src="../../../../_static/img/logos/odoo_logo.svg" height="20" alt="Odoo"/>
          <span>docs</span>
      </a>
    </div>
    <div class="d-flex flex-grow-1">
<div id="searchbox" class="o_search_wrapper d-flex flex-grow-1" role="search">
    <form class="o_search" action="../../../../search.html" method="get">
        <input type="text" name="q" id="q" class="form-control rounded-pill" placeholder="What are you looking for?">
        <input type="hidden" name="area" value="default">
        <input type="hidden" name="check_keywords" value="yes">
        <button type="submit" class="btn"><i class="i-search"></i></button>
    </form>
</div>
<script type="text/javascript">$('.o_search_wrapper').show(0);</script>
        <a class="btn btn-primary fw_bold ms-auto d-none d-lg-inline-block" href="https://odoo.com/trial">Pruebe Odoo GRATIS</a>
    </div>
</div>
<div class="o_subheader border-bottom d-flex">
    <div class="o_side_nav_toggler_wrapper border-end d-flex d-lg-none">
        <button class="h-100 border-0" type="button" data-bs-toggle="collapse" data-bs-target="#o_menu" aria-label="Toggle navigation">
            <i class="i-sidepanel"></i>
        </button>
    </div>
    <div class="d-flex justify-content-end ms-auto"><div class="o_languages">
	<div class="dropdown">
            <button class="btn btn-sm dropdown-toggle"
                    id="languages"
                    data-bs-toggle="dropdown">
                ES 
            </button>
        <ul class="dropdown-menu" aria-labelledby="languages">
                <li><a class="o_switcher_item dropdown-item" href="https://ekodo.es/doc/applications/finance/accounting/reporting/customize.html">EN</a></li>
        </ul>
	</div>
</div><div class="o_versions row">
    <div class="dropdown">
            <button class="btn btn-sm dropdown-toggle"
                    id="versions"
                    disabled="">
                Odoo 16 
            </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="versions">
        </ul>
    </div>
</div>
    </div>
</div>
    </header>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">documentación de Odoo - 16.0</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Reportes personalizados</a></li> 
      </ul>
    </div>
    <div id="wrap">

        <main class="container-fluid ">
                <article id="o_content" class="doc-body">
                    <div role="main"> 
  <section id="custom-reports">
<h1>Reportes personalizados<a class="headerlink" href="#custom-reports" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Odoo dispone de un marco de reportes avanzado y fácil de usar. Esta herramienta le permite crear nuevos reportes como <strong>reportes fiscales</strong>, <strong>balances generales</strong> y <strong>estados de resultados</strong> con <strong>grupos</strong> y <strong>diseños</strong> específicos.</p>
<div class="alert alert-warning">
<p class="alert-title">
Importante</p><p>Active el <a class="reference internal" href="../../../general/developer_mode.html#developer-mode"><span class="std std-ref">modo de desarrollador</span></a> para acceder a la interfaz de creación de reportes contables.</p>
</div>
<p>Para crear un nuevo reporte vaya a <span class="menuselection">Contabilidad ‣ configuración ‣ gestión: reportes contables</span>. Aquí, puede crear un <a class="reference internal" href="#customize-reports-root"><span class="std std-ref">reporte raíz</span></a> o una <a class="reference internal" href="#customize-reports-variants"><span class="std std-ref">variante</span></a>.</p>
<img alt="herramienta de reportes contables." class="align-center" src="../../../../_images/engine-accounting-reports.png" />
</section><section id="root-reports">
<span id="customize-reports-root"></span><h2>Reporte raíz<a class="headerlink" href="#root-reports" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Los reportes raíz se pueden considerar como reportes contables generales; sirven como modelos sobre los que se construyen las versiones de contabilidad locales. Si se crea un reporte y no se le asigna un reporte raíz, se considera que dicho reporte es un reporte raíz.</p>
<div class="alert alert-success">
<p class="alert-title">
Example</p><p>Un reporte fiscal para Bélgica y Estados Unidos usará la misma versión general como base y se adaptará según sus normativas nacionales.</p>
</div>
<p>Si desea crear un reporte raíz nuevo, deberá crearle un <strong>elemento de menú</strong> primero. Para hacer esto debe abrir el reporte y, en el mismo reporte, hacer clic en <span class="menuselection">acción ‣ crear elemento de menú</span>. Vuelva a cargar la página y verá el reporte en <span class="menuselection">Contabilidad ‣ reportes</span>.</p>
<div class="alert alert-primary">
<p class="alert-title">
Nota</p><p>No es normal encontrarse casos que requieran crear un nuevo reporte raíz, un ejemplo de casos que lo necesitan son los reportes específicos que exigen algunas autoridades fiscales.</p>
</div>
<img alt="Botón de crear elemento de menú." class="align-center" src="../../../../_images/engine-create-menu-item.png" />
</section><section id="variants">
<span id="customize-reports-variants"></span><h2>Variantes<a class="headerlink" href="#variants" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Las variantes son versiones específicas de los reportes raíz, por lo que siempre van a referirse a un reporte raíz. Para crear una variante, selecciona un reporte raíz general en <span class="guilabel">reporte raíz</span> al crear un nuevo reporte.</p>
<p>Cuando se abre un reporte raíz desde uno de los menús principales de la aplicación Contabilidad, aparecerán todas sus variantes en el selector de variantes situado en la esquina superior derecha de la vista.</p>
<div class="alert alert-success">
<p class="alert-title">
Example</p><p>La siguiente imagen, <span class="guilabel">reporte de IVA (BE)</span> es una variante del reporte raíz <span class="guilabel">reporte general de impuestos</span>.</p>
<img alt="Selección de variante de reportes." class="align-center" src="../../../../_images/engine-variant.png" />
</div>
</section><section id="lines">
<h2>Líneas<a class="headerlink" href="#lines" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Después de haber creado un reporte (raíz o variante), necesita agregar las líneas necesarias; las puede crear haciendo clic en <span class="guilabel">agregar línea</span> o modifique una línea existente al hacer clic sobre ella. Todas las líneas <em>necesitan</em> un <span class="guilabel">nombre</span>, y pueden llegar a tener una opción adicional de <span class="guilabel">Código</span> (de su elección) por si desea usar su valor en formulas.</p>
<img alt="opciones de la herramienta de líneas" class="align-center" src="../../../../_images/engine-lines-options.png" />
</section><section id="expressions">
<h2>Expresiones<a class="headerlink" href="#expressions" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Cada línea puede contener una o varias <strong>expresiones</strong>. Las expresiones pueden actuar como <strong>subvariables</strong> que se necesitan en una línea de reporte. Si desea crear una expresión, haga clic en <span class="guilabel">Agregar línea</span> <em>dentro</em> de una línea de reporte.</p>
<p>Si desea crear una expresión debe atribuirle una <span class="guilabel">etiqueta</span> que se utilizará como referencia a dicha expresión. Por lo tanto, cada expresión debe ser <strong>única</strong> entre todas las líneas. Se deben indicar tanto <span class="guilabel">motor de cálculo</span> y la <span class="guilabel">Formula</span>. El <strong>motor</strong> define la manera en que se interpretan las <strong>fórmulas</strong> y <strong>subfórmulas</strong>. Si es necesario, se pueden incluir distintas expresiones que utilicen diferentes motores de cálculo en la misma línea.</p>
<div class="alert alert-primary">
<p class="alert-title">
Nota</p><p>En algunos casos también va a ser necesario definir <span class="guilabel">subfórmulas</span>.</p>
</div>
</section><section id="odoo-domain-engine">
<h3>Motor del dominio de Odoo<a class="headerlink" href="#odoo-domain-engine" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Este motor identifica una fórmula como un <span class="xref std std-ref">dominio de Odoo</span> cuyo destino son los objetos account.move.line.</p>
<p>La subformula le permite definir el uso de las líneas de movimiento que coinciden con el dominio para calcular el valor de la expresión:</p>
<dl class="simple">
<dt><code class="o_code docutils literal notranslate"><span class="pre">sum</span></code></dt><dd><p>El resultado es la suma de todos los balances de las líneas de movimiento coincidentes.</p>
</dd>
<dt><code class="o_code docutils literal notranslate"><span class="pre">sum_if_pos</span></code></dt><dd><p>El resultado es la suma de todos los balances de las líneas de movimiento coincidentes si el importe es positivo; de lo contrario, es <code class="o_code docutils literal notranslate"><span class="pre">0</span></code>.</p>
</dd>
<dt><code class="o_code docutils literal notranslate"><span class="pre">sum_if_neg</span></code></dt><dd><p>El resultado es la suma de todos los balances de las líneas de movimiento coincidentes si el importe es negativo; de lo contrario, es <code class="o_code docutils literal notranslate"><span class="pre">0</span></code>.</p>
</dd>
<dt><code class="o_code docutils literal notranslate"><span class="pre">count_rows</span></code></dt><dd><p>El resultado es el número de sublíneas de esta expresión. Si la línea principal tiene un valor «agrupar por», corresponderá al número de claves de agrupación distintas en las líneas de movimiento coincidentes. De lo contrario, corresponderá al número de líneas de movimiento coincidentes.</p>
</dd>
</dl>
<p>Si coloca el signo <code class="o_code docutils literal notranslate"><span class="pre">-</span></code> al principio de la subfórmula, el resultado tendrá un signo <strong>invertido</strong>.</p>
<img alt="Línea de expresión dentro de una línea de reporte" class="align-center" src="../../../../_images/engine-expressions.png" />
</section><section id="tax-tags-engine">
<h3>Etiquetas de impuestos<a class="headerlink" href="#tax-tags-engine" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Cualquier fórmula creada mediante este motor tendrá un nombre que permita que coincidan con las etiquetas de impuestos. Si dichas etiquetas no existen al crear la expresión, se crearán.</p>
<p>Cuando se evalúa la expresión, su cálculo puede expresarse de la siguiente manera: <strong>(cantidad de líneas de movimiento con</strong> <code class="o_code docutils literal notranslate"><span class="pre">+</span></code> <strong>etiqueta)</strong> <code class="o_code docutils literal notranslate"><span class="pre">-</span></code> <strong>(cantidad de líneas de movimiento con</strong> <code class="o_code docutils literal notranslate"><span class="pre">-</span></code> <strong>etiqueta)</strong>.</p>
<div class="alert alert-success">
<p class="alert-title">
Example</p><p>Si la fórmula es <code class="o_code docutils literal notranslate"><span class="pre">nombre_etiqueta</span></code>, el motor compara las etiquetas de impuestos <code class="o_code docutils literal notranslate"><span class="pre">+nombre_etiqueta</span></code> y <code class="o_code docutils literal notranslate"><span class="pre">-nombre_etiqueta</span></code>, y las crea si es necesario. Para ejemplificar, la fórmula coincide con dos etiquetas; si la fórmula es <code class="o_code docutils literal notranslate"><span class="pre">A</span></code>, necesitará (y creará, si es necesario) las etiquetas <code class="o_code docutils literal notranslate"><span class="pre">+A</span></code> y <code class="o_code docutils literal notranslate"><span class="pre">-A</span></code>.</p>
</div>
</section><section id="aggregate-other-formulas-engine">
<h3>Agregar otras fórmulas<a class="headerlink" href="#aggregate-other-formulas-engine" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Utilice este motor cuando necesite realizar operaciones aritméticas con las cantidades obtenidas para otras expresiones. Las fórmulas se componen de referencias a expresiones separadas por uno de los cuatro operadores aritméticos básicos (suma <code class="o_code docutils literal notranslate"><span class="pre">+</span></code>, resta <code class="o_code docutils literal notranslate"><span class="pre">-</span></code>, división <code class="o_code docutils literal notranslate"><span class="pre">/</span></code> y multiplicación <code class="o_code docutils literal notranslate"><span class="pre">*</span></code>). Si desea hacer referencia a una expresión, escriba el <strong>código</strong> de la línea principal seguido de un punto <code class="o_code docutils literal notranslate"><span class="pre">.</span></code> y la <strong>etiqueta</strong> de la expresión (por ejemplo, <strong>código.etiqueta</strong>).</p>
<p>Las <strong>subfórmulas</strong> pueden ser las siguientes:</p>
<dl class="simple">
<dt><code class="o_code docutils literal notranslate"><span class="pre">if_above(CUR(amount))</span></code></dt><dd><p>Se devolverá el valor de la expresión aritmética solo si es mayor que el límite proporcionado. De lo contrario, el resultado será <code class="o_code docutils literal notranslate"><span class="pre">0</span></code>.</p>
</dd>
<dt><code class="o_code docutils literal notranslate"><span class="pre">if_below(CUR(amount))</span></code></dt><dd><p>Se devolverá el valor de la expresión aritmética solo si es menor que el límite proporcionado. De lo contrario, el resultado será <code class="o_code docutils literal notranslate"><span class="pre">0</span></code>.</p>
</dd>
<dt><code class="o_code docutils literal notranslate"><span class="pre">if_between(CUR1(amount1),</span> <span class="pre">CUR2(amount2))</span></code></dt><dd><p>Se devolverá el valor de la expresión aritmética solo si se encuentra entre los límites proporcionados. De lo contrario, se devolverá al límite más cercano.</p>
</dd>
<dt><code class="o_code docutils literal notranslate"><span class="pre">if_other_expr_above(LINE_CODE.EXPRESSION_LABEL,</span> <span class="pre">CUR(amount))</span></code></dt><dd><p>Se devolverá el valor de la expresión aritmética solo si el valor indicado por el código de línea y la etiqueta de expresión es mayor que el límite establecido. De lo contrario, el resultado será <code class="o_code docutils literal notranslate"><span class="pre">0</span></code>.</p>
</dd>
<dt><code class="o_code docutils literal notranslate"><span class="pre">if_other_expr_below(LINE_CODE.EXPRESSION_LABEL,</span> <span class="pre">CUR(amount))</span></code></dt><dd><p>Se devolverá el valor de la expresión aritmética solo si el valor indicado por el código de línea y la etiqueta de expresión es inferior al límite establecido. De lo contrario, el resultado será <code class="o_code docutils literal notranslate"><span class="pre">0</span></code>.</p>
</dd>
</dl>
<p><code class="o_code docutils literal notranslate"><span class="pre">CUR</span></code> es el código de la divisa en mayúsculas, e <code class="o_code docutils literal notranslate"><span class="pre">importe</span></code> es el importe del límite expresado en esa divisa.</p>
<p>También puede utilizar la subfórmula <code class="o_code docutils literal notranslate"><span class="pre">cross_report</span></code> para que coincida con una expresión encontrada en otro reporte.</p>
</section><section id="prefix-of-account-codes-engine">
<h3>Prefijo de los códigos de cuenta<a class="headerlink" href="#prefix-of-account-codes-engine" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Este motor se utiliza para hacer coincidir los importes realizados en las cuentas mediante los prefijos de los códigos de estas cuentas como variables de una expresión aritmética.</p>
<div class="alert alert-success">
<p class="alert-title">
Example</p><div class="line-block">
<div class="line"><code class="o_code docutils literal notranslate"><span class="pre">21</span></code></div>
<div class="line">Las expresiones aritméticas también pueden tener solo un prefijo, como aquí.</div>
</div>
</div>
<div class="alert alert-success">
<p class="alert-title">
Example</p><div class="line-block">
<div class="line"><code class="o_code docutils literal notranslate"><span class="pre">21</span> <span class="pre">+</span> <span class="pre">10</span> <span class="pre">-</span> <span class="pre">5</span></code></div>
<div class="line">Esta fórmula suma los balances de las líneas de movimiento realizadas en cuentas cuyos códigos empiezan por <code class="o_code docutils literal notranslate"><span class="pre">21</span></code> y <code class="o_code docutils literal notranslate"><span class="pre">10</span></code>, y resta el balance de las realizadas en cuentas con el prefijo <code class="o_code docutils literal notranslate"><span class="pre">5</span></code>.</div>
</div>
</div>
<p>También es posible ignorar una selección de subprefijos.</p>
<div class="alert alert-success">
<p class="alert-title">
Example</p><div class="line-block">
<div class="line"><code class="o_code docutils literal notranslate"><span class="pre">21</span> <span class="pre">+</span> <span class="pre">10\(101,</span> <span class="pre">102)</span> <span class="pre">-</span> <span class="pre">5\(57)</span></code></div>
<div class="line">Esta fórmula funciona igual que en el ejemplo anterior, solo que en este caso no se tienen en cuenta los prefijos <code class="o_code docutils literal notranslate"><span class="pre">101</span></code>, <code class="o_code docutils literal notranslate"><span class="pre">102</span></code> y <code class="o_code docutils literal notranslate"><span class="pre">57</span></code>.</div>
</div>
</div>
<p>También puede aplicar un «subfiltrado» en los <strong>créditos y débitos</strong> utilizando los sufijos <code class="o_code docutils literal notranslate"><span class="pre">C</span></code> y <code class="o_code docutils literal notranslate"><span class="pre">D</span></code>. En este caso, solo se tendrá en cuenta una cuenta si su prefijo coincide, <em>y</em> si el balance total de las líneas de movimiento realizadas en esta cuenta es de <strong>crédito/débito</strong>.</p>
<div class="alert alert-success">
<p class="alert-title">
Example</p><p>La cuenta <code class="o_code docutils literal notranslate"><span class="pre">210001</span></code> tiene un balance de -42 y la cuenta <code class="o_code docutils literal notranslate"><span class="pre">210002</span></code> tiene un balance de 25. La fórmula <code class="o_code docutils literal notranslate"><span class="pre">21D</span></code> solo coincide con la cuenta <code class="o_code docutils literal notranslate"><span class="pre">210002</span></code>, por lo que devuelve 25. La cuenta <code class="o_code docutils literal notranslate"><span class="pre">210001</span></code> no coincide, ya que su saldo es de <em>crédito</em>.</p>
</div>
<p>Se pueden mezclar las exclusiones de los prefijos con los sufijos <code class="o_code docutils literal notranslate"><span class="pre">C</span></code> y <code class="o_code docutils literal notranslate"><span class="pre">D</span></code>.</p>
<div class="alert alert-success">
<p class="alert-title">
Example</p><div class="line-block">
<div class="line"><code class="o_code docutils literal notranslate"><span class="pre">21D</span> <span class="pre">+</span> <span class="pre">10\(101,</span> <span class="pre">102)C</span> <span class="pre">-</span> <span class="pre">5\(57)</span></code></div>
<div class="line">Esta fórmula suma los balances de las líneas de movimiento realizadas en cuentas cuyos códigos empiezan por <code class="o_code docutils literal notranslate"><span class="pre">21</span></code> <em>si</em> es débito (<code class="o_code docutils literal notranslate"><span class="pre">D</span></code>) y <code class="o_code docutils literal notranslate"><span class="pre">10</span></code> <em>si</em> es crédito (<code class="o_code docutils literal notranslate"><span class="pre">C</span></code>) pero ignora los prefijos <code class="o_code docutils literal notranslate"><span class="pre">101</span></code> y <code class="o_code docutils literal notranslate"><span class="pre">102</span></code>, y resta el balance de las realizadas en cuentas con el prefijo <code class="o_code docutils literal notranslate"><span class="pre">5</span></code>, sin tomar en cuenta el prefijo <code class="o_code docutils literal notranslate"><span class="pre">57</span></code>.</div>
</div>
</div>
<p>Si desea que la letra <code class="o_code docutils literal notranslate"><span class="pre">C</span></code> o <code class="o_code docutils literal notranslate"><span class="pre">D</span></code> coincida con un prefijo y no se utilice como sufijo, utilice una exclusión vacía <code class="o_code docutils literal notranslate"><span class="pre">()</span></code>.</p>
<div class="alert alert-success">
<p class="alert-title">
Example</p><div class="line-block">
<div class="line"><code class="o_code docutils literal notranslate"><span class="pre">21D\()</span></code></div>
<div class="line">Esta fórmula coincide con las cuentas cuyo código empieza con <code class="o_code docutils literal notranslate"><span class="pre">21D</span></code>, sin importar el signo de su balance.</div>
</div>
</div>
<p>Además de utilizar prefijos de código para incluir cuentas, también puede hacer que coincidan con las <strong>etiquetas de cuentas</strong>. Esto es muy útil, por ejemplo, si su país no tiene un plan de cuentas estandarizado, donde es posible que se use el mismo prefijo para diferentes propósitos de una empresa a otra.</p>
<div class="alert alert-success">
<p class="alert-title">
Example</p><div class="line-block">
<div class="line"><code class="o_code docutils literal notranslate"><span class="pre">etiqueta(25)</span></code></div>
<div class="line">Esta fórmula devuelve las cuentas con las etiquetas asociadas que incluyen el ID <em>25</em>.</div>
</div>
</div>
<p>Si la etiqueta a la que hace referencia está definida en un archivo de datos, puede usar XMLID en lugar del ID.</p>
<div class="alert alert-success">
<p class="alert-title">
Example</p><div class="line-block">
<div class="line"><code class="o_code docutils literal notranslate"><span class="pre">etiqueta(mi_módulo.mi_etiqueta)</span></code></div>
<div class="line">Esta fórmula devuelve las cuentas con las etiquetas asociadas a la etiqueta indicada por <em>mi_módulo.mi_etiqueta</em>.</div>
</div>
</div>
<p>También puede usar expresiones aritméticas con etiquetas y tiene la posibilidad de combinarlas con selecciones de prefijo.</p>
<div class="alert alert-success">
<p class="alert-title">
Example</p><div class="line-block">
<div class="line"><code class="o_code docutils literal notranslate"><span class="pre">etiqueta(mi_módulo.mi_etiqueta)</span> <span class="pre">+</span> <span class="pre">etiqueta(42)</span> <span class="pre">+</span> <span class="pre">10</span></code></div>
<div class="line">Los saldos de las cuentas etiquetadas como <em>mi_módulo.mi_etiqueta</em> se sumarán con los de las cuentas vinculadas a la etiqueta con el ID <em>42</em> y las cuentas con el prefijo de código <code class="o_code docutils literal notranslate"><span class="pre">10</span></code>.</div>
</div>
</div>
<p>Los sufijos <code class="o_code docutils literal notranslate"><span class="pre">C</span></code> y <code class="o_code docutils literal notranslate"><span class="pre">D</span></code> se pueden utilizar de la misma forma con las etiquetas.</p>
<div class="alert alert-success">
<p class="alert-title">
Example</p><div class="line-block">
<div class="line"><code class="o_code docutils literal notranslate"><span class="pre">etiqueta(mi_módulo.mi_etiqueta)C</span></code></div>
<div class="line">Esta fórmula devuelve las cuentas con la etiqueta <em>mi_módulo.mi_etiqueta</em> y un saldo positivo.</div>
</div>
</div>
<p>La exclusión de prefijos también funciona con las etiquetas.</p>
<div class="alert alert-success">
<p class="alert-title">
Example</p><div class="line-block">
<div class="line"><code class="o_code docutils literal notranslate"><span class="pre">etiqueta(mi_módulo.mi_etiqueta)\(10)</span></code></div>
<div class="line">Esta fórmula devuelve las cuentas con la etiqueta <em>mi_modulo.mi_etiqueta</em> y un código que no empieza con <code class="o_code docutils literal notranslate"><span class="pre">10</span></code>.</div>
</div>
</div>
</section><section id="external-value-engine">
<h3>Valor externo<a class="headerlink" href="#external-value-engine" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La herramienta “valor externo” se utiliza para referirse a los valores <strong>manuales</strong> y <strong>traspasados</strong>. Estos valores no se almacenan con <code class="o_code docutils literal notranslate"><span class="pre">account.move.line</span></code>, sino con <code class="o_code docutils literal notranslate"><span class="pre">account.report.external.value</span></code>. Cada uno de estos objetos dirige directamente a la expresión sobre la que actúa, por lo que no hace falta hacer mucho para seleccionarlos.</p>
<p>Las <strong>fórmulas</strong> pueden ser las siguientes:</p>
<dl class="simple">
<dt><code class="o_code docutils literal notranslate"><span class="pre">sum</span></code></dt><dd><p>Si el resultado debe ser la suma de todos los valores externos del periodo.</p>
</dd>
<dt><code class="o_code docutils literal notranslate"><span class="pre">most_recent</span></code></dt><dd><p>Si el resultado debe ser el valor del último valor externo del periodo.</p>
</dd>
</dl>
<p>Además, puede usar las <strong>subfórmulas</strong> de dos formas:</p>
<dl class="simple">
<dt><code class="o_code docutils literal notranslate"><span class="pre">rounding=X</span></code></dt><dd><p>Se sustituye <code class="o_code docutils literal notranslate"><span class="pre">X</span></code> por un número para redondear la cantidad a X decimales.</p>
</dd>
<dt><code class="o_code docutils literal notranslate"><span class="pre">editable</span></code></dt><dd><p>Indica que esta expresión se puede editar de forma manual, lo que provoca la aparición de un icono en el reporte que permite que el usuario realice esta acción.</p>
</dd>
</dl>
<div class="alert alert-primary">
<p class="alert-title">
Nota</p><p>Los valores manuales se crean en la <code class="o_code docutils literal notranslate"><span class="pre">date_to</span></code> seleccionada en el reporte.</p>
</div>
<p>Ambas fórmulas se pueden usar al mismo tiempo, solo se deben separar por <code class="o_code docutils literal notranslate"><span class="pre">;</span></code>.</p>
<div class="alert alert-success">
<p class="alert-title">
Example</p><div class="line-block">
<div class="line"><code class="o_code docutils literal notranslate"><span class="pre">editable;rounding=2</span></code></div>
<div class="line">es una fórmula correcta que mezcla ambos comportamientos.</div>
</div>
</div>
</section><section id="custom-python-function-engine">
<h3>Función python personalizada<a class="headerlink" href="#custom-python-function-engine" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Esta herramienta permite que los desarrolladores introduzcan cálculos personalizados de expresiones caso por caso. La fórmula es el nombre de una <strong>función de python</strong> a llamar, y la subfórmula es una <strong>clave</strong> a buscar en el <strong>diccionario</strong> devuelto por esta función. Utilícela solo si está creando su propio módulo personalizado.</p>
</section><section id="columns">
<h2>Columnas<a class="headerlink" href="#columns" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Los reportes pueden tener un <strong>número indefinido</strong> de columnas. Cada columna obtiene sus valores de las <strong>expresiones</strong> indicadas en las <strong>líneas</strong>. El campo <span class="guilabel">expression_label</span> de la columna proporciona la etiqueta de las expresiones cuyo valor se muestra. Si una línea no tiene ninguna <strong>expresión</strong> en ese campo, no se mostrará nada para ella en esta columna. Si se necesitan varias columnas, debe utilizar diferentes etiquetas de <strong>expresión</strong></p>
<img alt="Columnas en el reporte" class="align-center" src="../../../../_images/engine-columns.png" />
<p>Si utiliza la función <strong>comparación de periodos</strong> en la pestaña <span class="guilabel">Opciones</span> de un reporte contable, todas las columnas se repiten en y para cada periodo.</p>
</section>

                    </div>
                </article>
        </main>
            
            <aside id="o_page_toc" class="o_page_toc" hidden><div class="o_page_toc_nav mt-1">
    <h5>En esta página</h5>
    <ul>
<li><a class="reference internal" href="#">Reportes personalizados</a><ul>
<li><a class="reference internal" href="#root-reports">Reporte raíz</a></li>
<li><a class="reference internal" href="#variants">Variantes</a></li>
<li><a class="reference internal" href="#lines">Líneas</a></li>
<li><a class="reference internal" href="#expressions">Expresiones</a><ul>
<li><a class="reference internal" href="#odoo-domain-engine">Motor del dominio de Odoo</a></li>
<li><a class="reference internal" href="#tax-tags-engine">Etiquetas de impuestos</a></li>
<li><a class="reference internal" href="#aggregate-other-formulas-engine">Agregar otras fórmulas</a></li>
<li><a class="reference internal" href="#prefix-of-account-codes-engine">Prefijo de los códigos de cuenta</a></li>
<li><a class="reference internal" href="#external-value-engine">Valor externo</a></li>
<li><a class="reference internal" href="#custom-python-function-engine">Función python personalizada</a></li>
</ul>
</li>
<li><a class="reference internal" href="#columns">Columnas</a></li>
</ul>
</li>
</ul>
 
</div>
            </aside>
    </div>
    <footer><div class="o_get_help container-fluid d-lg-flex">
    <div class="col-12 col-lg-10">
        <h4><i class="i-o-help me-2"></i>Obtenga ayuda</h4>
        <div>
            <a href="https://odoo.com/help" target="_blank" class="btn btn-outline-secondary mb-2">Contactar a soporte</a>
            <a href="https://www.odoo.com/forum/help-1" target="_blank" class="btn btn-outline-secondary mb-2">Pregúntele a la comunidad de Odoo</a>
        </div>
    </div>
    <div class="col-12 col-lg-2 mt-5 mt-lg-0 text-center">
        <a class="o_logo" href="https://www.odoo.com">
            <img src="../../../../_static/img/logos/odoo_logo.svg" height="20" alt="Odoo"/>
        </a>
    </div>
</div>
    </footer>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">documentación de Odoo - 16.0</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Reportes personalizados</a></li> 
      </ul>
    </div>
  </body>
</html>